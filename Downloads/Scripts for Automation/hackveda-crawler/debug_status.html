<!DOCTYPE html>
<html>
<head>
    <title>Debug Status</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>
</head>
<body>
    <h1>HackVeda Crawler Debug</h1>
    <div id="status">Checking connection...</div>
    <div id="logs"></div>
    
    <script>
        const socket = io();
        const statusDiv = document.getElementById('status');
        const logsDiv = document.getElementById('logs');
        
        function log(message) {
            console.log(message);
            logsDiv.innerHTML += '<p>' + new Date().toLocaleTimeString() + ': ' + message + '</p>';
        }
        
        log('üöÄ Starting connection test...');
        
        socket.on('connect', function() {
            statusDiv.innerHTML = '‚úÖ CONNECTED';
            statusDiv.style.color = 'green';
            log('‚úÖ Socket connected successfully');
        });
        
        socket.on('disconnect', function() {
            statusDiv.innerHTML = '‚ùå DISCONNECTED';
            statusDiv.style.color = 'red';
            log('‚ùå Socket disconnected');
        });
        
        socket.on('connect_error', function(error) {
            statusDiv.innerHTML = '‚ùå CONNECTION ERROR';
            statusDiv.style.color = 'red';
            log('‚ùå Connection error: ' + error);
        });
        
        // Test API calls
        setTimeout(() => {
            log('üîç Testing API calls...');
            
            fetch('/api/health')
                .then(r => r.json())
                .then(data => log('‚úÖ Health API: ' + JSON.stringify(data)))
                .catch(e => log('‚ùå Health API error: ' + e));
                
            fetch('/api/sessions')
                .then(r => r.json())
                .then(data => log('‚úÖ Sessions API: ' + data.sessions.length + ' sessions'))
                .catch(e => log('‚ùå Sessions API error: ' + e));
        }, 2000);
    </script>
</body>
</html>
